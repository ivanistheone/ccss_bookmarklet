<!DOCTYPE html>
<html>


  <head>
    <title>CC bookmarklet</title>



  </head>



  <h1> CCSS bookmarklet</h1>

  <p>An automatic lookup for Common Core State Standards codes</p>

  <h2><a name="usage" class="anchor" href="#usage"><span class="mini-icon mini-icon-link"></span></a>Usage</h2>

  <ol>
    <li>Copy the this link to your bookmark toolbar:  <a href="javascript:{alert('Sup G!');}void(0);">CCcodes</a>
        </li>
    <li>Go to any site that uses these codes.</li>
    <li>Click bookmarklet.</li>
    <li>Now you will see a description of each standard when you hover over the text.</li>
  </ol>
  
  <h2>Lookups</h2>

  <p>The following type of codes are recognized:</p>

  <ul>
    <li> <code>6.EE.1</code>: The shortest possible.</li>
    <li> <code>CC.6.EE.1</code>: In use at Khan Academy </li>
    <li> <code>Math.6.EE.1</code>: The official long code </li>
  </ul>
  All of these will show the popup: "Write and evaluate numerical expressions involving whole-number exponents."

  <h2>Credits</h2>
  <ul>
  <li>inspiration: 
    <a href="https://addons.mozilla.org/en-us/firefox/addon/perapera-kun-chinese-popup-tra/">https://addons.mozilla.org/en-us/firefox/addon/perapera-kun-chinese-popup-tra/</a>
  </li>
  <li>bookmarklet info: <a href="https://github.com/dergachev">https://github.com/dergachev</a>
  </li>
  <li>data: <a href="https://github.com/commoncurriculum/standards-data">https://github.com/commoncurriculum/standards-data</a>
  </li>
  </ul>



  <!--  Let's get things started and import the libs -->
  <script src="js/vendor/jquery.js"></script>
  <script src="js/vendor/underscore.js"></script>

  <script type="text/javascript">
  
    // Load the application once the DOM is ready, using `jQuery.ready`:
    var CClookup = {};      // == window.CClookup
    

    // setup lookuptable and aliases
    var setupLUT = function ( ) {
      var i;
      var raw_data = window.CClookup["raw_data"];
      var LUT = {};
      window.CClookup["LUT"] = LUT; 

      for (i=0; i<raw_data.length; i++) {
        LUT[ raw_data[i].shortCode ] = raw_data[i].statement ;
        LUT[ "CC." + raw_data[i].shortCode ] = "redirect:"+raw_data[i].shortCode ;
        LUT[ "Math." + raw_data[i].shortCode ] = "redirect:"+raw_data[i].shortCode ;
      }
    };


    // lookup function --- follows redirects
    var doLookup = function ( q ) {

      statement = window.CClookup["LUT"][ q ];
      // statement could be the full statement or a redirect 
     
      if (!statement){    // not found then return null...
        return null;
      }
      if (statement.substring(0,9)==="redirect:"){
        statement = window.CClookup["LUT"][ statement.substring(9) ];
      }
      return statement;

    };




    // LOAD DATA
    $.getJSON('js/ccss_data_for_bookmarklet.json', function(response){
       window.CClookup["raw_data"] = response;
       console.log("Loaded data");
    })
    .success(function() { 
      console.log("second success"); 
      setupLUT();
    })
    .error(function() { alert("error"); })
    .complete(function() { console.log("complete"); });
  





  </script>








</html>




